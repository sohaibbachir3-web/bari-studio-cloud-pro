export default async function handler(req,res){ if(req.method!=='POST') return res.status(405).end(); const body=req.body; const webhook = process.env.NEXT_PUBLIC_N8N_WEBHOOK || ''; if(!webhook) return res.status(500).json({error:'Webhook not configured'}); try{ const r = await fetch(webhook,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(body)}); if(r.ok) return res.status(200).json({ok:true}); const txt = await r.text(); return res.status(502).json({ok:false,txt}); }catch(err){ return res.status(500).json({error:err.message}); } }